---
published: true
title: A Tutorial for Isolating Your System with Linux Namespaces
layout: post
author: jungwook
category: Container
tags:
- Linux
- Namespace
---
Reference Page : <https://www.toptal.com/linux/separation-anxiety-isolating-your-system-with-linux-namespaces>

Docker, Linux Containers 등과 같은 툴들의 출현으로 리눅스 프로세스를 별도의 소규모 시스템 환경으로 독립(고립)시키는 것이 매우 쉬워졌다. 이것은 하나의 리눅스 머신상에서 가상 머신을 사용하려는 노력없이도 여러 개의 어플리케이션을 운용하는 것을 가능하게 해주었으며, 운용중인 어플리케션간에 서로 간섭하지 않는다. 이러한 툴들은 PasS 제공업체에게 매우 큰득이 되었다. 해당 서비스들 상에서 정확히 무슨 일이 일어나고 있는것인가?

이러한 툴들은 리눅스 커널에서 제공하는 다양한 피쳐와 컴포넌트에 의존하고 있다. 이러한 피쳐중에 일부는 꽤 최근에 소개되었으며, 일부는 여전히 커널 패치를 하도록 요구할 수 있다. 그러나 중요한 피쳐중에 하나인 Linux Namespace의 사용은 2008년에 릴리즈된 2.6.24버젼 이래로 계속 리눅스의 특징 중에 하나였다. 

`chroot`에 익숙한 누구든지 Linux namespace가 할 수 있는 것과 일반적으로 namespace를 사용히 위한 방법에 대한 기본적인 아이디어를 가지고 있었다. `chroot`가 ( 해당 프로세스의 나머지 부분과는 독립적인 )시스템의 루트로써 어떤 임의의 프로세스를 보도록 허용하는 것처럼, Linux namespaces도 역시 운영체제의 다른측면이 독립적으로 수정되는 것을 허용한다. 이것은 프로세스 트리, 네트워킹 인터페이스, 마운트 포인트 그리고 IPC 리소스등을 포함한다.

### Process고립을 위해 Namespace를 사용하는 이유?

싱글 유저 컴퓨터에서, 단독 시스템 환경은 좋을지도 모르지만, 복수개의 서비스를 운용하기를 원하는 서버상에서 서비스들이 가능한 서로 고립되어 있는 것이 보안적인 면에서나 운영안정성 면에서 필수적이다. 여러개의 서비스를 우녕하고 있는 서버를 생각해보자, 시스템에 침입한 사람에 의해 그중 하나가 해킹되었다. 그러한 상황에, 침입자는 해당 서비스를 부당하게 이용할 수 있고, 다른서비스 침입자가 원하는 대로 할 수 있다. 그리고 심지어 전체 서버를 해킹할 수도 있다. Namespace 고립은 이러한 리스크를 제거하기 위한 보안적인 환경으로 제공될 수 있다.

에를 들면, namesapce를 사용함으로써, 서버상에서 임의의 혹은 알지 못하는 프로그램을 안전하게 실행할 수가 있다. 최근, HackerRan, TopCoder, Codeforces 등과 같은 증가하고 있는 수많은 프로그래밍 콘테스트와 "Hackeathon" 플래폼이 있다. 그들중 다수가 콘테스트 참여자에의해 제출된 프로그램들을 실행하고 검증하기 위한 자동화파이프라인을 이용한다. 종종 콘테스트 참가자의 프로그램에 대한 진실성을 미리 알아내는 것이 종종 불가능하다. 심지어 일부는 악의적인 요소를 포함한다. 이러한 프로그램을 시스템의 나머지와 완변하게 분리된 namespace화된 곳에서 운영함으로써, 소프트웨어는 시스템의 나머지 부분에 리스크를 주지 않고 테스트되거나 검증될 수가 있다. 유사하게 Drone.io와 같은 Online CI 서비스들은 자동적으로 당신의 코드 저장소를 팻치한 후 서버 스스로 테스트 스크립트를 실행할 수 있다. 다시 말해, namespace isolation은 서비스를 안전하게 제공하도록 해준다.

Docker와 같은 Namespacing 툴은 프로세스의 시스템 리소스 사용이나 PasS 제공자에 의해 사용하기 위한 매우 대중적인 툴을 만드는데에 대한 보다 나은 컨트롤을 허용한다. Heroku나 Google App Engine과 같은 서비스들은 동일한 하드웨어 상에서 독립되어 운영되는 다양한 웹어플리케이션을 위한 툴들을 사용한다. 이러한 툴들은 각각의 어플리케이션들이 그들 중 하나가 너무 많은 리소스를 사용하는 것에 대한 우려나 혹은 같은 머신상에서 배포되는 서비스들 간의 간섭이나 충돌없이 운영되도록 해준다. 이러한 process isolation을 가지고, 각각의 고리된 환경을 위해 완전히 다른 독립적인 소프트웨어 스택을 갖는 것도 가능하다.


